temp$year <- as.numeric(format(temp$time, "%Y"))
temp$month <- as.numeric(format(temp$time, "%m"))
temp$day <- as.numeric(format(temp$time, "%d"))
temp$hour <- format(temp$time, "%H")
temp$id <- paste0(list[i,3],"_", list[i,4])
temp.agg <- temp %>% group_by(hour, id) %>% summarize(avg = mean(generation)) %>% as.data.frame()
sol_agg <- rbind(sol_agg,temp.agg)
temp.act <- filter(temp, year == 2014, month == 10, day == 15)
temp.act <- temp.act %>% group_by(hour, id) %>% summarize(avg = mean(generation)) %>% as.data.frame()
sol_act <- rbind(sol_act,temp.act)
}
5064/24
3200*24
# Clear workspace
rm(list = ls())
# Packages
library(pacman)
p_load(magrittr, dplyr, stringr, ggplot2,data.table, ggmap, usmap, mapproj)
# Set working directory
DIR <- "C:\\Users\\Will\\GoogleDrive\\UCBerkeley\\Research\\Papers\\2018 Off-grid\\Analysis\\"
OUT = "out\\"
IN = "in\\"
##########################################################
## I. read in output data ################################
##########################################################
#calculate average solar profiles
list <- fread(paste0(DIR,IN,"optimization_list.csv"))
sol_agg <- data.frame()
sol_act <- data.frame()
for (i in 1:nrow(list)) {
#create solar dataframe
temp <- fread(paste0(DIR,IN,"sol_data\\", list[i,3],"_", list[i,4],".csv"))
#convert local to time element
temp$time <- as.POSIXct(strptime(temp$local_time_stor, "%Y-%m-%d %H:%M:%S"))
temp$year <- as.numeric(format(temp$time, "%Y"))
temp$month <- as.numeric(format(temp$time, "%m"))
temp$day <- as.numeric(format(temp$time, "%d"))
temp$hour <- format(temp$time, "%H")
temp$id <- paste0(list[i,3],"_", list[i,4])
temp.agg <- temp %>% group_by(hour, id) %>% summarize(avg = mean(generation)) %>% as.data.frame()
sol_agg <- rbind(sol_agg,temp.agg)
temp.act <- filter(temp, year == 2014, month == 10, day == 15)
temp.act <- temp.act %>% group_by(hour, id) %>% summarize(avg = mean(generation)) %>% as.data.frame()
sol_act <- rbind(sol_act,temp.act)
}
##output results
fwrite(sol_agg,paste0(DIR,OUT,"\\sol_agg.csv"))
fwrite(sol_act,paste0(DIR,OUT,"\\sol_act.csv"))
i = 1
#base case
temp <- fread(paste0(DIR,IN,"\\res_load\\BASE\\",id[i], ".csv"), col.names=c("V","load"))
load_data = fread(paste0(DIR,IN,"\\id.csv"))
id <- id[which(load_data$ID!= 724365 & load_data$ID!= 724935 & load_data$ID!= 725477), ]
load_agg <- data.frame()
load_act <- data.frame()
#base case
temp <- fread(paste0(DIR,IN,"\\res_load\\BASE\\",id[i], ".csv"), col.names=c("V","load"))
id <- load_data[which(load_data$ID!= 724365 & load_data$ID!= 724935 & load_data$ID!= 725477), ]
#base case
temp <- fread(paste0(DIR,IN,"\\res_load\\BASE\\",id[i], ".csv"), col.names=c("V","load"))
View(temp)
temp$hr <- rep(1:24,365)
temp$id <- id[i]
temp$scen <- "BASE"
temp.agg <- temp %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_agg <- rbind(load_agg,temp.agg)
temp.act <- temp[6913:6937,]
temp.act <- temp.act %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
View(temp.act)
View(load_agg)
#calculate average load profiles
load_data = fread(paste0(DIR,IN,"\\id.csv"))
id <- load_data[which(load_data$ID!= 724365 & load_data$ID!= 724935 & load_data$ID!= 725477), ]
load_agg <- data.frame()
load_act <- data.frame()
for (i in 1:length(id$ID)) {
#base case
temp <- fread(paste0(DIR,IN,"\\res_load\\BASE\\",id[i], ".csv"), col.names=c("V","load"))
temp$hr <- rep(1:24,365)
temp$id <- id[i]
temp$scen <- "BASE"
temp.agg <- temp %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_agg <- rbind(load_agg,temp.agg)
temp.act <- temp[6913:6937,]
temp.act <- temp.act %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_act <- rbind(load_act,temp.act)
#low case
temp <- fread(paste0(DIR,IN,"\\res_load\\LOW\\",id[i], ".csv"), col.names=c("V","load"))
temp$hr <- rep(1:24,365)
temp$id <- id[i]
temp$scen <- "LOW"
temp.agg <- temp %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_agg <- rbind(load_agg,temp.agg)
temp.act <- temp[6913:6937,]
temp.act <- temp.act %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_act <- rbind(load_act,temp.act)
#high case
temp <- fread(paste0(DIR,IN,"\\res_load\\HIGH\\",id[i], ".csv"), col.names=c("V","load"))
temp$hr <- rep(1:24,365)
temp$id <- id[i]
temp$scen <- "HIGH"
temp.agg <- temp %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_agg <- rbind(load_agg,temp.agg)
temp.act <- temp[6913:6937,]
temp.act <- temp.act %>% group_by(hr, id, scen) %>%
summarize(avg = mean(load)*1000) %>% as.data.frame()
load_act <- rbind(load_act,temp.act)
}
fwrite(load_agg,paste0(DIR,OUT,"\\load_agg.csv"))
fwrite(load_act,paste0(DIR,OUT,"\\load_act.csv"))
# Clear workspace
rm(list = ls())
# Packages
library(pacman)
p_load(magrittr, dplyr, stringr, ggplot2,data.table, ggmap, usmap, mapproj)
# Set working directory
DIR <- "C:\\Users\\Will\\GoogleDrive\\UCBerkeley\\Research\\Papers\\2018 Off-grid\\Analysis\\"
OUT = "out\\"
IN = "in\\"
sol_agg <- fread(paste0(DIR,OUT,"\\sol_agg.csv"))
load_agg <- fread(paste0(DIR,OUT,"\\load_agg.csv"))
sol_act <- fread(paste0(DIR,OUT,"\\sol_act.csv"))
load_act <- fread(paste0(DIR,OUT,"\\load_act.csv"))
ggplot(data=sol_agg, aes(hr,avg)) + geom_line(aes(group = id))
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(group = id))
theme_plot <- theme(
legend.position = "right",
panel.background = element_rect(fill = NA),
panel.border = element_rect(fill = NA, color = "grey75"),
axis.ticks = element_line(color = "grey85"),
panel.grid.major = element_line(color = "grey95", size = 0.2),
panel.grid.minor = element_line(color = "grey95", size = 0.2),
legend.key = element_blank(),
legend.title = element_blank(),
legend.spacing.x = unit(0.3, "cm"))
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(group = id))
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(group = id)) + theme_plot
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(group = id), alpha = 0.4, size = 2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2))
sol_max <- sol_agg %>% group_by(id) %>% summarize(max = max(avg))
View(sol_max)
sol_agg <- merge(sol_agg, sol_max, by="id")
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = 1) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2))
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) +
theme(axis.text=element_text(size=12),axis.title=element_text(size=14,face="bold"),
legend.position = "none")
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 950, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) +
theme(axis.text=element_text(size=12),axis.title=element_text(size=14,face="bold"),
legend.position = "none")
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 950, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) +
theme(axis.text=element_text(size=12),axis.title=element_text(size=14,face="bold"),
legend.position = "none")
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) +
theme(axis.text=element_text(size=12),axis.title=element_text(size=14,face="bold"),
legend.position = "none")
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data")
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none") + scale_y_continuous(breaks=seq(0,1,.1))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none") + scale_y_continuous(breaks=seq(0,1,.1))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold")) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,1))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
sol_max <- sol_act %>% group_by(id) %>% summarize(max = max(avg))
sol_act <- merge(sol_act, sol_max, by="id")
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_act.jpg"), width = 500, height = 480)
ggplot(data=sol_act, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, 2014 Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
View(sol_act)
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_avg.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = max), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_avg.jpg"), width = 500, height = 480)
ggplot(data=sol_agg, aes(hour,avg)) + geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_act.jpg"), width = 500, height = 480)
ggplot(data=sol_act, aes(hour,avg)) + geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, 2014 Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_act.jpg"), width = 500, height = 480)
ggplot(data=sol_act, aes(hour,avg)) + geom_line(aes(color = max, group = id), alpha = 0.1, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, 2014 Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
sol_act_fin <- sol_act[1:4800,]
sol_act_fin <- sol_act[1:7680,]
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_act.jpg"), width = 500, height = 480)
ggplot(data=sol_act_fin, aes(hour,avg)) + geom_line(aes(color = max, group = id), alpha = 0.1, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, 2014 Data for 10% locations") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
#solar plots
jpeg(filename = paste0(DIR,OUT,"\\images\\solar_act.jpg"), width = 500, height = 480)
ggplot(data=sol_act_fin, aes(hour,avg)) + geom_line(aes(color = max, group = id), alpha = 0.5, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Output as percent of nameplate capacity") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, 2014 Data for 10% locations") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,1,0.1), limits=c(0,0.8))
dev.off()
#load plotting
load_max <- load_agg %>% group_by(id) %>% summarize(max = max(avg))
load_agg <- merge(load_agg, load_max, by="id")
load_max <- load_act %>% group_by(id) %>% summarize(max = max(avg))
load_act <- merge(load_act, load_max, by="id")
ggplot(data=load_agg[which(load_agg$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,6))
#load1
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_BASE.jpg"), width = 500, height = 480)
ggplot(data=load_agg[which(load_agg$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,3))
dev.off()
dev.off()
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_BASE.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,3))
dev.off()
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_LOW.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="LOW")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: Base Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,3))
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,3))
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,4))
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,5)
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,5))
dev.off()
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,6,1), limits=c(0,5))
dev.off()
#load1
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_BASE.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: Base Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load1
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_BASE.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: Base Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load2
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_LOW.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="LOW")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: Low Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load3
jpeg(filename = paste0(DIR,OUT,"\\images\\load_avg_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_agg[which(load_agg$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + xlab(label = "Hour of Day") + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: High Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5)) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
ggplot(data=load_act[which(load_act$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "Average Data: Base Case") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
View(load_act)
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_BASE.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3 Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank(),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load2
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_LOW.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="LOW")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3 Data") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank(),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_BASE.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="BASE")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3, Base") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank(),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load2
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_LOW.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="LOW")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3, Low") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.x=element_blank(), axis.ticks.x=element_blank(),axis.title.x=element_blank(),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load2
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3, High") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
#load2
jpeg(filename = paste0(DIR,OUT,"\\images\\load_act_HIGH.jpg"), width = 500, height = 250)
ggplot(data=load_act[which(load_act$scen =="HIGH")], aes(hr,avg/1000)) +
geom_line(aes(color = max, group = id), alpha = 0.4, size = .2) +
theme_plot + ylab(label = "Consumption (kWh)") + xlab(label = "Hour of Day") +
scale_x_continuous(breaks=seq(0,24,2)) + ggtitle(label = "October 15th, TMY3, High") +
theme(axis.text=element_text(size=14),axis.title=element_text(size=16,face="bold"),
legend.position = "none", plot.title = element_text(size=18,face="bold", hjust=0.5),
axis.text.y=element_blank(), axis.ticks.y=element_blank(),axis.title.y=element_blank()) +
scale_y_continuous(breaks=seq(0,5,1), limits=c(0,5))
dev.off()
# Clear workspace
rm(list = ls())
# Packages
library(pacman)
p_load(magrittr, dplyr, stringr, rjson, maps,maptools, spatstat,rgeos, broom, data.table)
# Set working directory
DIR <- "C:\\Users\\Will\\GoogleDrive\\UCBerkeley\\Research\\Papers\\2018 Off-grid\\Analysis\\"
OUT <- "in\\res_solar"
IN <-  "in\\"
LD<- "LOW"
DIR <- "G:\\Team Drives\\grid_defect_data\\Analysis\\"
IN <-  "in\\"
list <- list.files(paste0(DIR,IN,"all_data\\R files"))
for (i in 1:length(list)) {
out <- readRDS(paste0(DIR, IN,"all_data\\R files\\",list[i]))
write.csv(out,paste0(DIR, IN,"all_data\\",list[i],".csv"))
}
