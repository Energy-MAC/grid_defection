LOAD_COST = 650 # $/kW peak load
OM_COST = 100 # $/kW peak load per year
#annual rates
int_rate = 0.07 # percentage interest rate
bat_life = 20 # years
sol_life = 25 # years
inv_life = 20 # years
BAT_RATE = int_rate / (1 - (1+int_rate)^(-bat_life))
PV_RATE = int_rate / (1 - (1+int_rate)^(-sol_life))
INVT_RATE = int_rate / (1 - (1+int_rate)^(-inv_life))
sizing$grid_defect_cost <- sizing$pv * PV_COST * PV_RATE + sizing$storage * BAT_COST * BAT_RATE +
sizing$max_load * LOAD_COST * INVT_RATE + OM_COST * sizing$max_load
sizing$pv_lev <- (PV_COST * PV_RATE +
LOAD_COST * INVT_RATE +
OM_COST ) / (sizing$gen/9)
sizing$pv_size_load_offset <- sizing$energy / (sizing$gen/9)
sizing$cap_ex <- sizing$pv * PV_COST  + sizing$storage * BAT_COST +
sizing$max_load * LOAD_COST
sizing$reliability <- as.numeric(sizing$reliability)
sizes <- merge(sizing, fips, by=c("county","state"))
View(sizing)
##merge in data
defect <- merge(base_rates, sizing[,c(1:3,5:17)], by=c("county","state","case", "reliability"), all.x = TRUE)
##load defection cost
defect$load_defect_cost_current <- defect$r_curr_fixed + (1 - defect$reliability) * defect$energy *
defect$pv_lev
defect$load_defect_cost_pmc <- defect$private_fixed + (1 - defect$reliability) * defect$energy *
defect$pv_lev
View(defect)
#take differences
defect$curr_diff <- defect$r_current - defect$grid_defect_cost
defect$private_diff <- defect$r_private - defect$grid_defect_cost
##cost based defection
defect$current_defect_cost <- as.character(ifelse(defect$r_current < defect$load_defect_cost_current &
defect$r_current < defect$grid_defect_cost),0,
ifelse(defect$load_defect_cost_current < defect$grid_defect_cost,1,2))
defect$current_defect_cost <- as.character(ifelse(defect$r_current < defect$load_defect_cost_current &
defect$r_current < defect$grid_defect_cost,0,
ifelse(defect$load_defect_cost_current < defect$grid_defect_cost,1,2)))
View(defect)
##cost based defection
defect$current_defect_cost <- as.character(ifelse(defect$r_current < defect$load_defect_cost_current &
defect$r_current < defect$grid_defect_cost,0,
ifelse(defect$load_defect_cost_current < defect$grid_defect_cost,1,2)))
defect$private_defect_cost <- as.character(ifelse(defect$r_private < defect$load_defect_cost_private &
defect$r_private < defect$grid_defect_cost,0,
ifelse(defect$load_defect_cost_private < defect$grid_defect_cost,1,2)))
defect$storage > 200
(defect$pv > 20 | defect$storage > 200)
defect$current_defect_wconst <- as.character(ifelse(defect$current_defect_cost == 2 &
(defect$pv > 20 | defect$storage > 200) & defect$r_current < defect$load_defect_cost_current,0,
ifelse(defect$current_defect_cost == 2 & (defect$pv > 20 | defect$storage > 200) &
defect$r_current > defect$load_defect_cost_current,1,defect$current_defect_cost)))
##with system constraints
defect$current_defect_wconst <- as.character(ifelse(defect$current_defect_cost == 2 &
(defect$pv > 20 | defect$storage > 200) & defect$r_current < defect$load_defect_cost_current,0,
ifelse(defect$current_defect_cost == 2 & (defect$pv > 20 | defect$storage > 200) &
defect$r_current > defect$load_defect_cost_current,1,defect$current_defect_cost)))
defect$private_defect_wconst <- as.character(ifelse(defect$private_defect_cost == 2 &
(defect$pv > 20 | defect$storage > 200) & defect$r_private < defect$load_defect_cost_private,0,
ifelse(defect$private_defect_cost == 2 & (defect$pv > 20 | defect$storage > 200) &
defect$r_private > defect$load_defect_cost_private,1,defect$private_defect_cost)))
#write to csv
write.csv(defect,file = paste0(DIR,OUT, "\\defection_v5.csv"))
##cost based defection
defect$current_defect_cost <- as.character(ifelse(defect$r_current < defect$load_defect_cost_current &
defect$r_current < defect$grid_defect_cost,0,
ifelse(defect$load_defect_cost_current < defect$grid_defect_cost,1,2)))
defect$private_defect_cost <- as.character(ifelse(defect$r_private < defect$load_defect_cost_pmc &
defect$r_private < defect$grid_defect_cost,0,
ifelse(defect$load_defect_cost_pmc < defect$grid_defect_cost,1,2)))
##with system constraints
defect$current_defect_wconst <- as.character(ifelse(defect$current_defect_cost == 2 &
(defect$pv > 20 | defect$storage > 200) & defect$r_current < defect$load_defect_cost_current,0,
ifelse(defect$current_defect_cost == 2 & (defect$pv > 20 | defect$storage > 200) &
defect$r_current > defect$load_defect_cost_current,1,defect$current_defect_cost)))
defect$private_defect_wconst <- as.character(ifelse(defect$private_defect_cost == 2 &
(defect$pv > 20 | defect$storage > 200) & defect$r_private < defect$load_defect_cost_pmc,0,
ifelse(defect$private_defect_cost == 2 & (defect$pv > 20 | defect$storage > 200) &
defect$r_private > defect$load_defect_cost_pmc,1,defect$private_defect_cost)))
#write to csv
write.csv(defect,file = paste0(DIR,OUT, "\\defection_v5.csv"))
index = 1
rel = 1
ra = 1
s
final <- subset(defect, case == loads[index] & reliability == rels[rel])
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
final <- subset(defect, case == loads[index] & reliability == rels[rel])
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))>2){
cols <- c("deeppink4","lightgoldenrod3","firebrick4")
} else {
cols <- c("deeppink4","firebrick4")
}
if(nrow(unique(data[,2]))>1){
labs <- c("no defection","load defection","grid defection")
} else {
labs <- c("no defection", "grid defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
nrow(unique(data[,2]))>2
nrow(unique(data[,2]))
if(nrow(unique(data[,2]))>2){
cols <- c("deeppink4","lightgoldenrod3","firebrick4")
} else {
cols <- c("deeppink4","firebrick4")
}
if(nrow(unique(data[,2]))>2){
labs <- c("no defection","load defection","grid defection")
} else {
labs <- c("no defection", "grid defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
if(nrow(unique(data[,2]))>2){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else {
cols <- c("deeppink4","darkolivegreen")
}
if(nrow(unique(data[,2]))>2){
labs <- c("no defection","load defection","grid defection")
} else {
labs <- c("no defection", "darkolivegreen")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))>2){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else {
cols <- c("deeppink4","darkolivegreen")
}
if(nrow(unique(data[,2]))>2){
labs <- c("no defection","load defection","grid defection")
} else {
labs <- c("no defection", "grid defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
index = 2
rel = 1
ra = 1
final <- subset(defect, case == loads[index] & reliability == rels[rel])
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))>2){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else {
cols <- c("deeppink4","darkolivegreen")
}
if(nrow(unique(data[,2]))>2){
labs <- c("no defection","load defection","grid defection")
} else {
labs <- c("no defection", "grid defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
nrow(unique(data[,2]))
nrow(unique(data[,2]))
unique(data[,2]
)
View(data)
View(defect)
if(nrow(unique(data[,2]))==3){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else if(nrow(unique(data[,2]))==2) {
cols <- c("deeppink4","darkolivegreen")
} else {
cols <- c("deeppink4")
}
if(nrow(unique(data[,2]))==3){
labs <- c("no defection","load defection","grid defection")
} else if(nrow(unique(data[,2]))==2) {
labs <- c("no defection", "grid defection")
} else {
labs <- c("no defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))==3){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else if(nrow(unique(data[,2]))==2) {
cols <- c("deeppink4","darkolivegreen")
} else {
cols <- c("deeppink4")
}
if(nrow(unique(data[,2]))==3){
labs <- c("no defection","load defection","grid defection")
} else if(nrow(unique(data[,2]))==2) {
labs <- c("no defection", "grid defection")
} else {
labs <- c("no defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
View(data)
nrow(unique(data[,2]))
unique(data[,2])
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))>3){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else if(nrow(unique(data[,2]))==2) {
cols <- c("deeppink4","darkolivegreen")
} else {
cols <- c("deeppink4")
}
if(nrow(unique(data[,2]))>3){
labs <- c("no defection","load defection","grid defection")
} else if(nrow(unique(data[,2]))==2) {
labs <- c("no defection", "grid defection")
} else {
labs <- c("no defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
View(data)
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
if(nrow(unique(data[,2]))>=3){
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen")
} else if(nrow(unique(data[,2]))>=2) {
cols <- c("deeppink4","darkolivegreen")
} else {
cols <- c("deeppink4")
}
if(nrow(unique(data[,2]))>3){
labs <- c("no defection","load defection","grid defection")
} else if(nrow(unique(data[,2]))>2) {
labs <- c("no defection", "grid defection")
} else {
labs <- c("no defection")
}
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
cols <- unique(data[,3])
cols <- as.vector(unique(data[,3]))
View(cols)
cols <- as.vector(unique(data[,3]))
labs <- as.vector(unique(data[,4]))
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
cols <- as.vector(unique(data[,3]))
labs <- as.vector(unique(data[,4]))
cols <- c(unique(data[,3]))
labs <- c(unique(data[,4]))
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
cols <- as.vector(c(unique(data[,3])))
unique(data[,3])
cols <- unique(data[,4])
cols <- c(cols[1],cols[2])
cols[1]
cols <- c(cols[1,2],cols[2])
cols <- unique(data[,4])
cols <- c("no defection","load defection","grid defection",NA)
labs <- unique(data[,4])
cols <- c("deeppink4","lightgoldenrod3","darkolivegreen",NA)
labs <- c("no defection","load defection","grid defection",NA)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
cols <- unique(data[,3])
labs <- c("no defection","load defection","grid defection",NA)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
cols <- as.matrix(cols)
labs <- unique(data[,4])
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
cols <- unique(data[,3])
cols <- as.matrix(cols)
labs <- unique(data[,4])
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
index = 1
rel = 1
ra = 2
final <- subset(defect, case == loads[index] & reliability == rels[rel])
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
cols <- unique(data[,3])
labs <- unique(data[,4])
View(data)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
cols <- as.matrix(cols)
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
data <- data[order(label),]
cols <- unique(data[,3])
cols <- as.matrix(cols)
labs <- unique(data[,4])
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
View(data)
final <- subset(defect, case == loads[index] & reliability == rels[rel])
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
data <- data[order(-label),]
cols <- unique(data[,3])
cols <- as.matrix(cols)
labs <- unique(data[,4])
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
View(data)
## Grid defection plotting
loads <- c("LOW","BASE","HIGH")
rate <- c("private_defect_wconst","current_defect_wconst")
rels <- c(0,0.05)
for (index in 1:length(loads)){
for(rel in 1:length(rels)){
final <- subset(defect, case == loads[index] & reliability == rels[rel])
for (ra in 1:length(rate)){
data <- select(final,one_of(c("fips", rate[ra])))
data$color <- ifelse(data[,2]=="0","deeppink4",ifelse(data[,2]=="1","lightgoldenrod3","darkolivegreen"))
data$label <- ifelse(data[,2]=="0","no defection",ifelse(data[,2]=="1","load defection","grid defection"))
data <- data[order(-label),]
cols <- unique(data[,3])
cols <- as.matrix(cols)
labs <- unique(data[,4])
labs <- as.matrix(labs)
plot_usmap(data = data,
values = rate[ra], regions = "counties", lines=NA) +
scale_fill_manual(values=cols,labels=labs,na.value="black") +
theme(legend.position = c(0.89,0.2),legend.text=element_text(size=18),
legend.title=element_text(size=15,face="bold"),
plot.title = element_text(size=18,face="bold", hjust=0.5, vjust=0)) +
labs(fill="")
ggsave(filename = paste0(DIR,OUT, "\\images\\outcome_",rate[ra],"_",
loads[index],"_",rels[rel],".jpg"))
}
}
}
